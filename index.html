<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TorpTCG | Riftbound Specialists & Custom 3D Prints</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="cards-styles.css">
    <link rel="stylesheet" href="inventory-styles.css">
</head>

<body>

    <!-- NAVIGATION -->
    <nav>
        <div class="logo">TorpTCG</div>
        <div class="nav-links">
            <a href="#products">Shop</a>
            <a href="#services">Bespoke 3D Models</a>
            <a href="#contact">Contact</a>
            <a href="#" title="Discord Server (Coming Soon)" style="opacity: 0.5; cursor: not-allowed;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z" />
                </svg>
            </a>
            <div id="shopping-cart-icon" class="cart-icon-wrapper" title="Shopping Cart">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
                <span id="cart-badge" class="cart-badge">0</span>
                <div id="cart-tooltip" class="cart-tooltip">Drag me into your basket!</div>
            </div>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <div class="hero">
        <h1>Enter the Rift</h1>
        <p>The UK's Premier Destination for Riftbound TCG, Sealed Product, and Bespoke 3D Accessories.</p>
        <a href="#products" class="btn">Explore the Collection</a>
    </div>

    <!-- MAIN PRODUCT SECTION -->
    <div class="container" id="products">
        <h2 class="section-title">Products</h2>

        <!-- Filter Buttons -->
        <div class="filters">
            <button class="filter-btn active" onclick="filterProducts('all')">All</button>
            <button class="filter-btn" onclick="filterProducts('singles')">Singles</button>
            <button class="filter-btn" onclick="filterProducts('sealed')">Sealed</button>
            <button class="filter-btn" onclick="filterProducts('accessories')">Accessories</button>
            <button class="filter-btn" onclick="filterProducts('prints')">3D Prints</button>
        </div>

        <!-- Search Bar -->
        <div class="search-container" style="max-width: 600px; margin: 20px auto;">
            <input type="search" id="product-search" class="search-input" placeholder="Search products by name or ID..."
                oninput="handleProductSearch()"
                style="width: 100%; padding: 12px 20px; font-size: 1rem; border: 2px solid var(--border-color); border-radius: 8px; background: var(--bg-card); color: var(--text-primary); transition: all 0.3s ease;">
        </div>

        <!-- Out of Stock Toggle -->
        <div class="stock-toggle-container"
            style="display: flex; justify-content: center; align-items: center; gap: 10px; margin: 20px 0;">
            <label class="toggle-switch">
                <input type="checkbox" id="show-out-of-stock" onchange="toggleOutOfStock()">
                <span class="toggle-slider"></span>
            </label>
            <span style="color: var(--text-muted); font-size: 0.9rem;">Show out-of-stock items</span>
        </div>

        <!-- Show Filters Button (for Singles) -->
        <div id="show-filters-container" style="display: none; text-align: center; margin: 20px 0;">
            <button class="btn-secondary" id="toggle-search" onclick="toggleCardSearch()">
                ▼ Show Filters
            </button>
        </div>

        <!-- Card Search Panel (Hidden by default) -->
        <div id="card-search-panel" style="display: none;">
            <div class="search-panel">
                <h3 class="section-title" style="font-size: 1.5rem; margin-bottom: 30px;">Search & Filter Cards</h3>

                <!-- Search Inputs -->
                <div class="search-grid">
                    <!-- Name Search -->
                    <div class="search-field">
                        <label for="search-name">Card Name</label>
                        <input type="text" id="search-name" placeholder="Search by name...">
                    </div>

                    <!-- ID/Public Code Search -->
                    <div class="search-field">
                        <label for="search-id">Card ID / Code</label>
                        <input type="text" id="search-id" placeholder="e.g., 56, ogn-056...">
                    </div>

                    <!-- Ability Text Search -->
                    <div class="search-field full-width">
                        <label for="search-ability">Ability Text</label>
                        <input type="text" id="search-ability" placeholder="Search ability text...">
                    </div>

                    <!-- Price Range -->
                    <div class="search-field">
                        <label for="price-min">Price (£)</label>
                        <div class="range-inputs">
                            <input type="number" id="price-min" placeholder="Min" min="0" step="0.01">
                            <span>-</span>
                            <input type="number" id="price-max" placeholder="Max" min="0" step="0.01">
                        </div>
                    </div>

                    <!-- Energy Range -->
                    <div class="search-field">
                        <label for="energy-min">Energy (Min - Max)</label>
                        <div class="range-inputs">
                            <input type="number" id="energy-min" placeholder="Min" min="0" max="10">
                            <span>-</span>
                            <input type="number" id="energy-max" placeholder="Max" min="0" max="10">
                        </div>
                    </div>

                    <!-- Might Range -->
                    <div class="search-field">
                        <label for="might-min">Might (Min - Max)</label>
                        <div class="range-inputs">
                            <input type="number" id="might-min" placeholder="Min" min="0" max="10">
                            <span>-</span>
                            <input type="number" id="might-max" placeholder="Max" min="0" max="10">
                        </div>
                    </div>

                    <!-- Card Type Dropdown -->
                    <div class="search-field">
                        <label for="filter-type">Card Type</label>
                        <select id="filter-type">
                            <option value="">All Types</option>
                            <option value="unit">Unit</option>
                            <option value="spell">Spell</option>
                            <option value="gear">Gear</option>
                            <option value="rune">Rune</option>
                            <option value="legend">Legend</option>
                            <option value="signature">Signature Spell</option>
                        </select>
                    </div>

                    <!-- Rarity Dropdown -->
                    <div class="search-field">
                        <label for="filter-rarity">Rarity</label>
                        <select id="filter-rarity">
                            <option value="">All Rarities</option>
                            <option value="common">Common</option>
                            <option value="uncommon">Uncommon</option>
                            <option value="rare">Rare</option>
                            <option value="epic">Epic</option>
                            <option value="showcase">Showcase</option>
                        </select>
                    </div>

                    <!-- Domain Dropdown 1 -->
                    <div class="search-field">
                        <label for="filter-domain">Domain 1</label>
                        <select id="filter-domain">
                            <option value="">All Domains</option>
                            <option value="calm">Calm</option>
                            <option value="chaos">Chaos</option>
                            <option value="fury">Fury</option>
                            <option value="mind">Mind</option>
                            <option value="body">Body</option>
                            <option value="order">Order</option>
                        </select>
                    </div>

                    <!-- Domain Dropdown 2 -->
                    <div class="search-field">
                        <label for="filter-domain-2">Domain 2 (Optional)</label>
                        <select id="filter-domain-2">
                            <option value="">None</option>
                            <option value="calm">Calm</option>
                            <option value="chaos">Chaos</option>
                            <option value="fury">Fury</option>
                            <option value="mind">Mind</option>
                            <option value="body">Body</option>
                            <option value="order">Order</option>
                        </select>
                    </div>

                    <!-- Set Dropdown -->
                    <div class="search-field">
                        <label for="filter-set">Card Set</label>
                        <select id="filter-set">
                            <option value="">All Sets</option>
                            <option value="OGN">Origins</option>
                            <option value="SFD">Spiritforged</option>
                        </select>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="search-actions">
                    <button class="btn" id="apply-card-filters">Apply Filters</button>
                    <button class="btn-secondary" id="reset-card-filters">Reset</button>
                    <span class="results-count" id="card-results-count">Loading...</span>
                </div>
            </div>
        </div>

        <!-- Product Grid -->
        <div class="product-grid" id="product-container">
            <!-- Products injected via script.js -->
        </div>
    </div>

    <!-- SERVICES SECTION -->
    <div class="services-section" id="services">
        <div class="container">
            <h2 class="section-title">Hobbyist 3D Printing</h2>
            <div style="display: flex; flex-wrap: wrap; gap: 50px; align-items: center;">
                <div style="flex: 1; min-width: 300px;">
                    <h3 style="color: var(--accent); margin-bottom: 20px; font-size: 1.8rem;">Featured Designer:
                        Torpisoul
                    </h3>
                    <p style="margin-bottom: 20px; color: var(--text-muted);">
                        New to 3D printing and modelling, but passionate about bringing ideas to life. Software tester
                        by day, gamer by night. Specializing in PC gaming accessories and TCGs (Riftbound).
                    </p>
                    <ul style="margin-bottom: 30px; list-style: none;">
                        <li style="margin-bottom: 10px;">✨ Three-Dimensional Noughts & Crosses</li>
                        <li style="margin-bottom: 10px;">✨ Custom Gaming Accessories</li>
                        <li style="margin-bottom: 10px;">✨ TCG Focused Designs</li>
                        <li style="margin-bottom: 10px;">✨ MakerWorld Guardian</li>
                    </ul>
                    <a href="https://makerworld.com/en/@Torpisoul" target="_blank" class="btn">View on MakerWorld</a>
                </div>
                <div style="flex: 1; min-width: 300px;">
                    <img src="https://makerworld.bblmw.com/makerworld/model/US5af7c8253de31d/design/2025-11-13_65f68aebae57f8.jpg?x-oss-process=image/resize,w_800/format,webp"
                        alt="3D Printing - Three-Dimensional Noughts & Crosses Game"
                        style="width: 100%; border-radius: 16px; border: 1px solid var(--glass-border); box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                </div>
            </div>
        </div>
    </div>

    <!-- CONTACT FORM -->
    <div class="container" id="contact">
        <h2 class="section-title">Contact Us</h2>
        <div style="max-width: 600px; margin: 0 auto;">
            <p style="text-align: center; margin-bottom: 30px; color: var(--text-muted);">
                Looking for a specific card or want to commission a print? Drop us a message.
            </p>

            <form name="contact" method="POST" data-netlify="true" netlify-honeypot="bot-field" action="success.html"
                class="contact-form"
                style="background: var(--bg-card); padding: 40px; border-radius: 16px; border: 1px solid var(--glass-border);">

                <!-- Honeypot field -->
                <p style="display: none;">
                    <label>Don't fill this out if you're human: <input name="bot-field" /></label>
                </p>

                <input type="hidden" name="form-name" value="contact" />

                <div class="form-group">
                    <input type="text" name="name" required placeholder="Your Name">
                </div>
                <div class="form-group">
                    <input type="email" name="email" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <select name="enquiry-type">
                        <option value="" disabled selected>Select Enquiry Type</option>
                        <option value="stock">Stock Request</option>
                        <option value="commission">3D Print Commission</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <textarea name="message" rows="5" placeholder="Tell us what you need..."></textarea>
                </div>
                <button type="submit" class="btn" style="width: 100%;">Send Message</button>
            </form>
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <h3>TORPTCG LTD</h3>
        <p>Specialists in Riftbound & Tabletop Accessories</p>
        <div class="legal-text">
            <p>&copy; 2024 TorpTCG. All rights reserved.</p>
            <p>Riftbound™ is a trademark of its respective owners. We are an independent retailer.</p>
        </div>
    </footer>

    <!-- Full Screen Card Modal -->
    <div id="card-modal" class="card-modal" onclick="closeCardModal(event)">
        <span class="modal-close" onclick="closeCardModal(event)">&times;</span>
        <img class="modal-card-image" id="modal-card-image" src="" alt="Card">
        <div class="modal-card-info" id="modal-card-info"></div>
    </div>

    <script src="script.js"></script>
    <script src="cards-script.js"></script>
    <script src="cart-drag-drop.js"></script>
    <script>
        if (window.netlifyIdentity) {
            window.netlifyIdentity.on("init", user => {
                if (!user) {
                    window.netlifyIdentity.on("login", () => {
                        document.location.href = "/admin/";
                    });
                }
            });
        }
    </script>
</body>

</html>